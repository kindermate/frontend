{"version":3,"sources":["webpack:///./src/views/mission/Mission.vue?bab1","webpack:///src/views/mission/Mission.vue","webpack:///./src/views/mission/Mission.vue?c4fa","webpack:///./src/views/mission/Mission.vue","webpack:///./src/views/mission/Mission.vue?bdc5","webpack:///./src/assets/img/time.svg","webpack:///./src/components/common/CircleIcon.vue?c843","webpack:///src/components/common/CircleIcon.vue","webpack:///./src/components/common/CircleIcon.vue?1f0b","webpack:///./src/components/common/CircleIcon.vue","webpack:///./src/components/common/CircleIcon.vue?3803"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","domProps","_l","member","index","key","id","on","$event","viewDetail","attrs","missionSet","week","_e","name","task","_id","title","_m","rating","staticRenderFns","data","members","isLoaded","components","ProfileListBlock","CircleIcon","computed","mapState","userId","methods","fetchMembers","getMembersWithMissions","console","makeResultGrades","map","item","missions","length","CTT","MAT","PBT","result","test","resultSet","getGrade","fetchMissionInfo","count","grade","getMissionInfo","birth","gender","avatar","mission","createdAt","$store","commit","payload","$router","push","alert","created","component","module","exports","style","_t","props","bgColor","type","default","cssVar"],"mappings":"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","file":"js/mission.df2fd1cf.min.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"mission\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(_vm._s(_vm.$t('mission.greeting')))]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.$t('mission.description'))}}),(_vm.isLoaded)?_c('ul',{staticClass:\"member-list\"},_vm._l((_vm.members),function(member,index){return _c('li',{key:member.id,on:{\"click\":function($event){return _vm.viewDetail(index)}}},[_c('div',{staticClass:\"head\"},[_c('ProfileListBlock',{attrs:{\"member\":member}}),(member.missionSet)?_c('div',{staticClass:\"week\"},[_c('CircleIcon',[_c('img',{attrs:{\"src\":require(\"@/assets/img/time.svg\")}})]),_c('span',[_vm._v(_vm._s(member.missionSet.week)+\"주차\")])],1):_vm._e()],1),(member.missionSet)?_c('div',{staticClass:\"mission-container\"},[_c('div',{staticClass:\"mission\"},[_c('div',{staticClass:\"head\"},[_vm._v(\" \"+_vm._s(_vm.$t((\"mission.code.\" + (member.missionSet.code))))+\" - \"+_vm._s(member.missionSet.name)+\" \")]),_vm._l((member.missionSet.tasks),function(task){return _c('div',{key:task._id,staticClass:\"task\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(task.title))]),_c('div',{staticClass:\"term\"},[_vm._m(0,true),_c('span',[_vm._v(_vm._s(_vm.$t((\"mission.term.\" + (task.term)))))])]),_c('div',{staticClass:\"rating\"},[_vm._v(_vm._s(task.rating))])])})],2)]):_vm._e()])}),0):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":require(\"@/assets/img/calendar.svg\")}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"mission\">\n    <h1 class=\"page-title\">{{ $t('mission.greeting') }}</h1>\n    <p v-html=\"$t('mission.description')\"></p>\n    <ul v-if=\"isLoaded\" class=\"member-list\">\n      <li v-for=\"(member, index) in members\" :key=\"member.id\" @click=\"viewDetail(index)\">\n        <div class=\"head\">\n          <ProfileListBlock :member=\"member\" />\n          <div v-if=\"member.missionSet\" class=\"week\">\n            <CircleIcon>\n              <img src=\"@/assets/img/time.svg\" />\n            </CircleIcon>\n            <span>{{ member.missionSet.week }}주차</span>\n          </div>\n        </div>\n        <div v-if=\"member.missionSet\" class=\"mission-container\">\n          <div class=\"mission\">\n            <div class=\"head\">\n              {{ $t(`mission.code.${member.missionSet.code}`) }} - {{ member.missionSet.name }}\n            </div>\n            <div v-for=\"task in member.missionSet.tasks\" :key=\"task._id\" class=\"task\">\n              <div class=\"name\">{{ task.title }}</div>\n              <div class=\"term\">\n                <div class=\"image\">\n                  <img src=\"@/assets/img/calendar.svg\" />\n                </div>\n                <span>{{ $t(`mission.term.${task.term}`) }}</span>\n              </div>\n              <div class=\"rating\">{{ task.rating }}</div>\n            </div>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </section>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { getMembersWithMissions, getMissionInfo } from '@/api';\nimport ProfileListBlock from '@/components/member/ProfileListBlock.vue';\nimport CircleIcon from '@/components/common/CircleIcon.vue';\n\nexport default {\n  data() {\n    return {\n      members: [],\n      isLoaded: false,\n    };\n  },\n  components: {\n    ProfileListBlock,\n    CircleIcon,\n  },\n  computed: {\n    ...mapState({\n      userId: state => state.currentUser.id,\n    }),\n  },\n  methods: {\n    async fetchMembers() {\n      try {\n        const { data } = await getMembersWithMissions(this.userId);\n        this.members = data.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    makeResultGrades() {\n      this.members.map((item, index) => {\n        if (item.missions.length > 0) {\n          const resultSet = {\n            CTT: [],\n            MAT: [],\n            PBT: [],\n          };\n          item.missions[0].result.results.map(result => {\n            result.part.map(part => {\n              if (result.test === 'CTT') {\n                resultSet.CTT.push(part.score.grade);\n              }\n              if (result.test === 'MAT') {\n                resultSet.MAT.push(part.score.grade);\n              }\n              if (result.test === 'PBT') {\n                resultSet.PBT.push(part.score.grade);\n              }\n            });\n          });\n          // console.log(resultSet);\n          this.members[index]['resultSet'] = resultSet;\n        }\n      });\n    },\n    getGrade(week, index) {\n      // todo: 주차별로 처리해야 함 중복되는 주도 고려\n      if (week === 1) return this.members[index].resultSet['CTT'][0];\n      if (week === 2) return this.members[index].resultSet['CTT'][1];\n    },\n    async fetchMissionInfo() {\n      let count = 0;\n      this.members.forEach(async (member, index) => {\n        const week = member.missions[0].week;\n        const grade = this.getGrade(week, index);\n        try {\n          const {\n            data: { data },\n          } = await getMissionInfo({ week: week, grade: grade });\n          this.members[index]['missionSet'] = data;\n        } catch (error) {\n          console.log(error);\n        } finally {\n          count = count + 1;\n          if (count === this.members.length) {\n            this.isLoaded = true;\n          }\n        }\n      });\n    },\n    viewDetail(index) {\n      if (!this.members[index].missionSet) {\n        alert(this.$t('mission.alert.noMission'));\n        return;\n      }\n      const payload = {\n        member: {\n          name: this.members[index].name,\n          birth: this.members[index].birth,\n          gender: this.members[index].gender,\n          avatar: this.members[index].avatar,\n        },\n        mission: {\n          ...this.members[index].missionSet,\n          id: this.members[index].missions[0]._id,\n          createdAt: this.members[index].missions[0].createdAt,\n        },\n      };\n      this.$store.commit('SET_MISSION', payload);\n      this.$router.push('/mission/detail');\n    },\n  },\n  async created() {\n    await this.fetchMembers();\n    this.makeResultGrades();\n    this.fetchMissionInfo();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.mission {\n  p {\n    color: $grey;\n  }\n  .member-list {\n    margin-top: 2rem;\n    li {\n      background-color: #fff;\n      padding: 1rem;\n      border-radius: 10px;\n      margin-bottom: 1.5rem;\n      cursor: pointer;\n\n      .head {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        // padding-top: 0.5rem;\n        .week {\n          display: flex;\n          align-items: center;\n          font-weight: $font-w600;\n        }\n      }\n\n      .mission-container {\n        .mission {\n          margin-top: 1rem;\n          .head {\n            font-size: $font-sm;\n            color: $grey;\n            margin-bottom: 0.5rem;\n          }\n          .task {\n            display: flex;\n            background-color: $grey-light-xx;\n            margin-bottom: 0.5rem;\n            padding: 0.8rem;\n            border-radius: 5px;\n\n            &:last-child {\n              margin-bottom: 0;\n            }\n            .term {\n              display: flex;\n              align-items: center;\n              margin-left: auto;\n              font-size: $font-sm;\n              width: 50px;\n              opacity: 0.4;\n              .image {\n                width: 15px;\n                margin-right: 5px;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mission.vue?vue&type=template&id=7203fd16&scoped=true&\"\nimport script from \"./Mission.vue?vue&type=script&lang=js&\"\nexport * from \"./Mission.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mission.vue?vue&type=style&index=0&id=7203fd16&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7203fd16\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mission.vue?vue&type=style&index=0&id=7203fd16&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/time.5af311c8.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"icon\",style:(_vm.cssVar)},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"icon\" :style=\"cssVar\">\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    bgColor: {\n      type: String,\n      default: '#F2F4F3',\n    },\n  },\n  computed: {\n    cssVar() {\n      return {\n        '--bgColor': this.bgColor,\n      };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.icon {\n  background-color: var(--bgColor);\n  border-radius: 50%;\n  padding: 5px;\n  margin-right: 0.3rem;\n  img {\n    display: block;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircleIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircleIcon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CircleIcon.vue?vue&type=template&id=a2e8dac2&scoped=true&\"\nimport script from \"./CircleIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./CircleIcon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CircleIcon.vue?vue&type=style&index=0&id=a2e8dac2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a2e8dac2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CircleIcon.vue?vue&type=style&index=0&id=a2e8dac2&lang=scss&scoped=true&\""],"sourceRoot":""}