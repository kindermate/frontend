(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["selectMember"],{"00bb":function(e,t,r){"use strict";r("9ac2")},"0cb2":function(e,t,r){var a=r("e330"),n=r("7b0b"),s=Math.floor,i=a("".charAt),c=a("".replace),o=a("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,a,d,m){var b=r+e.length,f=a.length,v=u;return void 0!==d&&(d=n(d),v=l),c(m,v,(function(n,c){var l;switch(i(c,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,r);case"'":return o(t,b);case"<":l=d[o(c,1,-1)];break;default:var u=+c;if(0===u)return n;if(u>f){var m=s(u/10);return 0===m?n:m<=f?void 0===a[m-1]?i(c,1):a[m-1]+i(c,1):n}l=a[u-1]}return void 0===l?"":l}))}},2281:function(e,t,r){e.exports=r.p+"img/icon_add.87a586ee.svg"},"2c35":function(e,t,r){e.exports=r.p+"img/icon_ok_off.58e44b43.svg"},5319:function(e,t,r){"use strict";var a=r("2ba4"),n=r("c65b"),s=r("e330"),i=r("d784"),c=r("d039"),o=r("825a"),l=r("1626"),u=r("5926"),d=r("50c4"),m=r("577e"),b=r("1d80"),f=r("8aa5"),v=r("dc4a"),p=r("0cb2"),h=r("14c3"),g=r("b622"),_=g("replace"),M=Math.max,$=Math.min,C=s([].concat),x=s([].push),k=s("".indexOf),w=s("".slice),E=function(e){return void 0===e?e:String(e)},T=function(){return"$0"==="a".replace(/./,"$0")}(),S=function(){return!!/./[_]&&""===/./[_]("a","$0")}(),R=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));i("replace",(function(e,t,r){var s=S?"$":"$0";return[function(e,r){var a=b(this),s=void 0==e?void 0:v(e,_);return s?n(s,e,a,r):n(t,m(a),e,r)},function(e,n){var i=o(this),c=m(e);if("string"==typeof n&&-1===k(n,s)&&-1===k(n,"$<")){var b=r(t,i,c,n);if(b.done)return b.value}var v=l(n);v||(n=m(n));var g=i.global;if(g){var _=i.unicode;i.lastIndex=0}var T=[];while(1){var S=h(i,c);if(null===S)break;if(x(T,S),!g)break;var R=m(S[0]);""===R&&(i.lastIndex=f(c,d(i.lastIndex),_))}for(var y="",I=0,B=0;B<T.length;B++){S=T[B];for(var D=m(S[0]),A=M($(u(S.index),c.length),0),O=[],j=1;j<S.length;j++)x(O,E(S[j]));var N=S.groups;if(v){var P=C([D],O,A,c);void 0!==N&&x(P,N);var U=m(a(n,void 0,P))}else U=p(D,c,A,O,N,n);A>=I&&(y+=w(c,I,A)+U,I=A+D.length)}return y+w(c,I)}]}),!R||!T||S)},"5c52":function(e,t,r){},"5dac":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"select-member"},[a("h1",{staticClass:"page-title"},[e._v(e._s(e.$t("test.selectMember.greeting")))]),e.members.length?a("ul",{staticClass:"member-list"},e._l(e.members,(function(t,n){return a("li",{key:t._id,ref:"member",refInFor:!0,attrs:{"data-id":t._id},on:{click:function(t){return e.selectMember(t,n)}}},[a("div",{staticClass:"name"},[a("img",{staticClass:"ok-off",attrs:{src:r("2c35")}}),a("img",{staticClass:"ok-on",attrs:{src:r("c28f")}}),a("span",[e._v(e._s(t.name))])]),a("div",{staticClass:"info"},[a("div",{staticClass:"top"},[e._v(" "+e._s(e.getGender(t.gender))+" / "+e._s(e._f("moment")(t.birth,"YYYY년 MM월 DD일생"))+" ")]),t.hasActiveMission?a("div",{staticClass:"bottom"},[e._v("미션을 완수한 이후 재검사가 가능합니다")]):e._e()])])})),0):a("div",{staticClass:"empty"},[e._v(e._s(e.$t("noData.member")))]),a("a",{staticClass:"addButton",on:{click:function(t){t.preventDefault(),e.showModal=!0}}},[a("img",{attrs:{src:r("2281")}}),a("span",[e._v(e._s(e.$t("test.selectMember.addButton")))])]),a("div",{staticClass:"buttons mt-6"},[a("a",{staticClass:"button is-fullwidth is-success",attrs:{disabled:!e.selectComplete},on:{click:e.nextPage}},[e._v(" "+e._s(e.$t("test.selectMember.completeButton"))+" ")])]),e.showModal?a("ModalBlank",{on:{close:e.closeModal}},[[a("h2",[e._v(e._s(e.$t("test.addMember.modalTitle")))]),a("form",{on:{submit:function(t){return t.preventDefault(),e.addMember.apply(null,arguments)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v(e._s(e.$t("test.addMember.name")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:e.$t("test.addMember.placeholder.name")},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v(e._s(e.$t("test.addMember.birth")))]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.birth,expression:"birth"}],staticClass:"input",attrs:{type:"text",maxlength:"8",placeholder:e.$t("test.addMember.placeholder.birth")},domProps:{value:e.birth},on:{input:function(t){t.target.composing||(e.birth=t.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v(e._s(e.$t("test.addMember.gender")))]),a("div",{staticClass:"control"},[a("div",{staticClass:"select is-fullwidth"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.gender=t.target.multiple?r:r[0]}}},[a("option",{attrs:{disabled:"",value:""}},[e._v(e._s(e.$t("test.addMember.placeholder.gender")))]),a("option",{attrs:{value:"male"}},[e._v(e._s(e.$t("test.addMember.placeholder.gender_male")))]),a("option",{attrs:{value:"female"}},[e._v(e._s(e.$t("test.addMember.placeholder.gender_female")))])])])])]),a("button",{staticClass:"button is-fullwidth is-success mt-5"},[e._v(e._s(e.$t("test.addMember.addButton")))])])]],2):e._e()],1)},n=[],s=r("1da1"),i=(r("96cf"),r("ac1f"),r("5319"),r("d3b7"),r("159b"),r("b0c0"),r("365c")),c=r("9411"),o=r("c1df"),l=r.n(o),u={data:function(){return{members:"",selectedMemberId:"",showModal:!1,name:"",birth:"",gender:"",selectComplete:!1}},components:{ModalBlank:c["a"]},watch:{selectedMemberId:function(e){e&&(this.selectComplete=!0)},birth:function(){return this.birth=this.birth.replace(/[^0-9]/g,"")}},methods:{getGender:function(e){var t;return t="male"===e?"남":"여",t},getMonths:function(e){var t=l()(new Date);return t.diff(l()(e),"months")},fetchMemberAll:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["l"])(e.$store.state.currentUser.id);case 3:r=t.sent,a=r.data,e.members=a.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},selectMember:function(e,t){var r=this;this.members[t].hasActiveMission?alert("선택한 대상자는 현재 미션을 진행중입니다."):(this.$refs.member.forEach((function(e){e.classList.remove("is-active")})),e.currentTarget.classList.add("is-active"),this.selectedMemberId=e.currentTarget.getAttribute("data-id"),this.members.forEach((function(e){r.selectedMemberId===e._id&&(r.$store.commit("SET_MEMBER",e),r.$store.commit("SET_LASTESTMEMBER",e._id))})))},addMember:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.birth){t.next=13;break}if(r=l()(new Date),a=l()(e.birth),n=r.diff(a,"months"),console.log(n),!(n>120)){t.next=10;break}return alert(e.$t("alert.addMember.limit")),t.abrupt("return");case 10:if(!(n<24)){t.next=13;break}return alert(e.$t("alert.addMember.limit")),t.abrupt("return");case 13:if(e.name){t.next=16;break}return alert(e.$t("alert.addMember.name")),t.abrupt("return");case 16:if(e.birth){t.next=19;break}return alert(e.$t("alert.addMember.birth")),t.abrupt("return");case 19:if(e.gender){t.next=22;break}return alert(e.$t("alert.addMember.gender")),t.abrupt("return");case 22:return t.prev=22,s={parent:e.$store.state.currentUser.id,name:e.name,birth:e.birth,gender:e.gender},t.next=26,Object(i["e"])(s);case 26:c=t.sent,o=c.data,console.log(o),o.success&&(e.closeModal(),e.$router.go()),t.next=35;break;case 32:t.prev=32,t.t0=t["catch"](22),console.log(t.t0);case 35:case"end":return t.stop()}}),t,null,[[22,32]])})))()},closeModal:function(){this.showModal=!1},nextPage:function(){this.selectComplete?this.$router.push("/test/cover"):alert("검사 대상자를 선택해주세요")}},created:function(){this.$store.commit("RESET_MEMBER"),this.$store.commit("RESET_QUESTION"),this.$store.commit("SET_CURRENT_TEST","CTT"),this.fetchMemberAll()}},d=u,m=(r("00bb"),r("2877")),b=Object(m["a"])(d,a,n,!1,null,"00ba8bcd",null);t["default"]=b.exports},9411:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"modal",appear:""}},[r("div",{staticClass:"modal"},[r("div",{staticClass:"modal-background",on:{click:function(t){return t.preventDefault(),e.$emit("close")}}}),r("div",{staticClass:"modal-content"},[r("div",{staticClass:"box"},[e._t("default")],2)]),r("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}})])])},n=[],s=(r("b231"),r("2877")),i={},c=Object(s["a"])(i,a,n,!1,null,"7a0671e6",null);t["a"]=c.exports},"9ac2":function(e,t,r){},b0c0:function(e,t,r){var a=r("83ab"),n=r("5e77").EXISTS,s=r("e330"),i=r("9bf2").f,c=Function.prototype,o=s(c.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(l.exec),d="name";a&&!n&&i(c,d,{configurable:!0,get:function(){try{return u(l,o(this))[1]}catch(e){return""}}})},b231:function(e,t,r){"use strict";r("5c52")},c28f:function(e,t,r){e.exports=r.p+"img/icon_ok_on.a9acdac0.svg"}}]);
//# sourceMappingURL=selectMember.9a9dd336.min.js.map