(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["selectMember"],{"0cb2":function(e,t,a){var r=a("e330"),s=a("7b0b"),n=Math.floor,i=r("".charAt),c=r("".replace),l=r("".slice),o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,r,d,m){var b=a+e.length,v=r.length,f=u;return void 0!==d&&(d=s(d),f=o),c(m,f,(function(s,c){var o;switch(i(c,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,a);case"'":return l(t,b);case"<":o=d[l(c,1,-1)];break;default:var u=+c;if(0===u)return s;if(u>v){var m=n(u/10);return 0===m?s:m<=v?void 0===r[m-1]?i(c,1):r[m-1]+i(c,1):s}o=r[u-1]}return void 0===o?"":o}))}},1119:function(e,t,a){"use strict";a("71c0")},2281:function(e,t,a){e.exports=a.p+"img/icon_add.87a586ee.svg"},"2c35":function(e,t,a){e.exports=a.p+"img/icon_ok_off.58e44b43.svg"},5319:function(e,t,a){"use strict";var r=a("2ba4"),s=a("c65b"),n=a("e330"),i=a("d784"),c=a("d039"),l=a("825a"),o=a("1626"),u=a("5926"),d=a("50c4"),m=a("577e"),b=a("1d80"),v=a("8aa5"),f=a("dc4a"),h=a("0cb2"),p=a("14c3"),g=a("b622"),_=g("replace"),M=Math.max,$=Math.min,C=n([].concat),x=n([].push),k=n("".indexOf),w=n("".slice),E=function(e){return void 0===e?e:String(e)},B=function(){return"$0"==="a".replace(/./,"$0")}(),T=function(){return!!/./[_]&&""===/./[_]("a","$0")}(),R=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));i("replace",(function(e,t,a){var n=T?"$":"$0";return[function(e,a){var r=b(this),n=void 0==e?void 0:f(e,_);return n?s(n,e,r,a):s(t,m(r),e,a)},function(e,s){var i=l(this),c=m(e);if("string"==typeof s&&-1===k(s,n)&&-1===k(s,"$<")){var b=a(t,i,c,s);if(b.done)return b.value}var f=o(s);f||(s=m(s));var g=i.global;if(g){var _=i.unicode;i.lastIndex=0}var B=[];while(1){var T=p(i,c);if(null===T)break;if(x(B,T),!g)break;var R=m(T[0]);""===R&&(i.lastIndex=v(c,d(i.lastIndex),_))}for(var S="",D=0,I=0;I<B.length;I++){T=B[I];for(var j=m(T[0]),y=M($(u(T.index),c.length),0),A=[],O=1;O<T.length;O++)x(A,E(T[O]));var N=T.groups;if(f){var P=C([j],A,y,c);void 0!==N&&x(P,N);var U=m(r(s,void 0,P))}else U=h(j,c,y,A,N,s);y>=D&&(S+=w(c,D,y)+U,D=y+j.length)}return S+w(c,D)}]}),!R||!B||T)},"5c52":function(e,t,a){},"5dac":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"select-member"},[r("h1",{staticClass:"page-title"},[e._v(e._s(e.$t("test.selectMember.greeting")))]),e.members.length?r("ul",{staticClass:"member-list"},e._l(e.members,(function(t,s){return r("li",{key:t._id,ref:"member",refInFor:!0,attrs:{"data-id":t._id},on:{click:function(t){return e.selectMember(t,s)}}},[r("div",{staticClass:"name"},[r("img",{staticClass:"ok-off",attrs:{src:a("2c35")}}),r("img",{staticClass:"ok-on",attrs:{src:a("c28f")}}),r("span",[e._v(e._s(t.name))])]),r("div",{staticClass:"info"},[r("div",{staticClass:"top"},[e._v(" "+e._s(e.getGender(t.gender))+" / "+e._s(e._f("moment")(t.birth,"YYYY년 MM월 DD일생"))+" ")]),t.hasActiveMission?r("div",{staticClass:"bottom"},[e._v("미션을 완수한 이후 재검사가 가능합니다")]):e._e()])])})),0):r("div",{staticClass:"empty"},[e._v(e._s(e.$t("noData.member")))]),r("a",{staticClass:"addButton",on:{click:function(t){t.preventDefault(),e.showModal=!0}}},[r("img",{attrs:{src:a("2281")}}),r("span",[e._v(e._s(e.$t("test.selectMember.addButton")))])]),r("div",{staticClass:"buttons mt-6"},[r("a",{staticClass:"button is-fullwidth is-success",attrs:{disabled:!e.selectComplete},on:{click:e.nextPage}},[e._v(" "+e._s(e.$t("test.selectMember.completeButton"))+" ")])]),e.showModal?r("ModalBlank",{on:{close:e.closeModal}},[[r("h2",[e._v(e._s(e.$t("test.addMember.modalTitle")))]),r("form",{on:{submit:function(t){return t.preventDefault(),e.addMember.apply(null,arguments)}}},[r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v(e._s(e.$t("test.addMember.name")))]),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:e.$t("test.addMember.placeholder.name")},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v(e._s(e.$t("test.addMember.birth")))]),r("div",{staticClass:"control"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.birth,expression:"birth"}],staticClass:"input",attrs:{type:"text",maxlength:"8",placeholder:e.$t("test.addMember.placeholder.birth")},domProps:{value:e.birth},on:{blur:e.checkBirth,input:function(t){t.target.composing||(e.birth=t.target.value)}}})])]),r("div",{staticClass:"field"},[r("label",{staticClass:"label"},[e._v(e._s(e.$t("test.addMember.gender")))]),r("div",{staticClass:"control"},[r("div",{staticClass:"select is-fullwidth"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.gender=t.target.multiple?a:a[0]}}},[r("option",{attrs:{disabled:"",value:""}},[e._v(e._s(e.$t("test.addMember.placeholder.gender")))]),r("option",{attrs:{value:"male"}},[e._v(e._s(e.$t("test.addMember.placeholder.gender_male")))]),r("option",{attrs:{value:"female"}},[e._v(e._s(e.$t("test.addMember.placeholder.gender_female")))])])])])]),r("button",{staticClass:"button is-fullwidth is-success mt-5"},[e._v(e._s(e.$t("test.addMember.addButton")))])])]],2):e._e()],1)},s=[],n=a("1da1"),i=(a("96cf"),a("ac1f"),a("5319"),a("00b4"),a("d3b7"),a("159b"),a("b0c0"),a("365c")),c=a("9411"),l=a("c1df"),o=a.n(l),u={data:function(){return{members:"",selectedMemberId:"",showModal:!1,name:"",birth:"",validateBirth:!1,gender:"",selectComplete:!1}},components:{ModalBlank:c["a"]},watch:{selectedMemberId:function(e){e&&(this.selectComplete=!0)},birth:function(){return this.birth=this.birth.replace(/[^0-9]/g,"")}},methods:{checkBirth:function(){var e=/^(19[0-9][0-9]|20\d{2})(0[0-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$/;e.test(this.birth)?this.validateBirth=!0:(alert(this.$t("alert.join.unavailableBirth")),this.validateBirth=!1)},getGender:function(e){var t;return t="male"===e?"남":"여",t},getMonths:function(e){var t=o()(new Date);return t.diff(o()(e),"months")},fetchMemberAll:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["m"])(e.$store.state.currentUser.id);case 3:a=t.sent,r=a.data,e.members=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},selectMember:function(e,t){var a=this;this.members[t].hasActiveMission?alert("선택한 대상자는 현재 미션을 진행중입니다."):(this.$refs.member.forEach((function(e){e.classList.remove("is-active")})),e.currentTarget.classList.add("is-active"),this.selectedMemberId=e.currentTarget.getAttribute("data-id"),this.members.forEach((function(e){a.selectedMemberId===e._id&&(a.$store.commit("SET_MEMBER",e),a.$store.commit("SET_LASTESTMEMBER",e._id))})))},addMember:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.birth){t.next=13;break}if(a=o()(new Date),r=o()(e.birth),s=a.diff(r,"months"),console.log(s),!(s>120)){t.next=10;break}return alert(e.$t("alert.addMember.limit")),t.abrupt("return");case 10:if(!(s<24)){t.next=13;break}return alert(e.$t("alert.addMember.limit")),t.abrupt("return");case 13:if(e.name){t.next=16;break}return alert(e.$t("alert.addMember.name")),t.abrupt("return");case 16:if(e.birth){t.next=19;break}return alert(e.$t("alert.addMember.birth")),t.abrupt("return");case 19:if(e.validateBirth){t.next=22;break}return alert(e.$t("alert.join.unavailableBirth")),t.abrupt("return");case 22:if(e.gender){t.next=25;break}return alert(e.$t("alert.addMember.gender")),t.abrupt("return");case 25:return t.prev=25,n={parent:e.$store.state.currentUser.id,name:e.name,birth:e.birth,gender:e.gender},t.next=29,Object(i["e"])(n);case 29:c=t.sent,l=c.data,console.log(l),l.success&&(e.closeModal(),e.$router.go()),t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](25),console.log(t.t0);case 38:case"end":return t.stop()}}),t,null,[[25,35]])})))()},closeModal:function(){this.showModal=!1},nextPage:function(){this.selectComplete?this.$router.push("/test/cover"):alert("검사 대상자를 선택해주세요")}},created:function(){this.$store.commit("RESET_MEMBER"),this.$store.commit("RESET_QUESTION"),this.$store.commit("SET_CURRENT_TEST","CTT"),this.fetchMemberAll()}},d=u,m=(a("1119"),a("2877")),b=Object(m["a"])(d,r,s,!1,null,"24fbe600",null);t["default"]=b.exports},"71c0":function(e,t,a){},9411:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal",appear:""}},[a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-background",on:{click:function(t){return t.preventDefault(),e.$emit("close")}}}),a("div",{staticClass:"modal-content"},[a("div",{staticClass:"box"},[e._t("default")],2)]),a("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}})])])},s=[],n=(a("b231"),a("2877")),i={},c=Object(n["a"])(i,r,s,!1,null,"7a0671e6",null);t["a"]=c.exports},b231:function(e,t,a){"use strict";a("5c52")},c28f:function(e,t,a){e.exports=a.p+"img/icon_ok_on.a9acdac0.svg"}}]);
//# sourceMappingURL=selectMember.d7a09eb6.min.js.map